<!doctype html>
<html>
	<title>sample</title>
    <head>
       <!-- A-Frame を読み込む -->
    	<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    	<!-- AR.js を読み込む -->
    	<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    </head>
	<script>
	var audio;
	var sound = 0;
	var sound2 = 0;
	var AudioNullSum;
	var nowMilli_prev = 0;
		
	//se001
    AFRAME.registerComponent('se001', {
        init: function () {
            var marker = this.el;
            // マーカーを検出したイベントの登録
            marker.addEventListener('markerFound', function () {
                var markerId = marker.id;
                console.log('markerFound', markerId);
				audio = new Audio('assets/sound.mp3');
				sound = 1;
            });
            // マーカーを見失ったイベントの登録
            marker.addEventListener('markerLost', function () {
                var markerId = marker.id;
                console.log('markerLost', markerId);
				sound = 0;
            });
        }
    });
		
	//se002
    AFRAME.registerComponent('se002', {
        init: function () {
            var marker = this.el;
            // マーカーを検出したイベントの登録
            marker.addEventListener('markerFound', function () {
                var markerId = marker.id;
                console.log('markerFound', markerId);
				audio = new Audio('assets/sound2.mp3');
				eisho();
				sound2 = 1;
            });
            // マーカーを見失ったイベントの登録
            marker.addEventListener('markerLost', function () {
                var markerId = marker.id;
                console.log('markerLost', markerId);
				sound2 = 0;
            });
        }
    });
	AudioNullSum = sound + sound2;
	function eisho() {
		console.log("Hi");
		audio.play();
//		if(nowMilli_prev != nowMilli){
//  			if(0 < AudioNullSum) audio.play();
//			var mokugyo = new Audio('assets/mokugyo.mp3');
//			mokugyo.play();
//			document.getElementById("box").emit('anim');
//		}
//		nowMilli_prev = nowSec;
		//setTimeout('showClock()',500);
	}
	function showClock(){
		var nowTime = new Date();
		var nowHour = nowTime.getHours();
		var nowMin  = nowTime.getMinutes();
		var nowSec  = nowTime.getSeconds();
		var nowMilli  = nowTime.getMilliseconds();
		let msg = "現在時刻：" + nowHour + ":" + nowMin + ":" + nowSec + ":" + nowMilli ;
		document.getElementById("realtime").innerHTML = msg;
		setTimeout('showClock()',10);
	}
    setTimeout('showClock()',10);
		
</script>
	
<!---------------------------------------------------------------------------------------------------------->
	
    <body>
        <!-- A-FrameにAR.jsを紐づけ、VRボタン非表示、深度バッファ追加 -->
    	
		
		<h id="realtime"></h>
<!--
		<button id="playButton">音を鳴らす</button>
		<script>
			const audio = new Audio('assets/sound.mp3');
			document.getElementById('playButton').addEventListener('click', () => {
  			//audio.play();
			var obj = document.getElementById('realtime');
			obj.style.color = 'red';
			console.log(7);
			});
		</script>
-->
		

    </body>
</html>
